

<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">

    <title>Data visualization</title>

    <!-- Other CSS -->
    <link href="assets/css/modal.css" rel="stylesheet">
    <link href="assets/css/base.css" rel="stylesheet">
    <link href="assets/css/dataviz_tooltip.css" rel="stylesheet">

    <!-- CSS - Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">

    <!-- D3.js -->
    <script src="jquery-3.5.1.min.js"></script>
    <script src="https://d3js.org/d3.v6.min.js"></script>
</head>
<body>

<!-- header -->
<main class="mb-4">
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-light bg-transparent" style="background: transparent">
        <div class="container-fluid">
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav m-auto w-75 d-flex justify-content-around">
                    <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
                    <li class="nav-item"><a class="nav-link active" href="dataviz.html">Data-visualization</a></li>
                    <li class="nav-item"><a class="nav-link" href="document_cadrage.html">Document de cadrage</a></li>
                    <li class="nav-item"><a class="nav-link" href="peer_review.html">Peer review</a></li>
                    <li class="nav-item"><a class="nav-link" href="evolution.html">Avancement</a></li>
                    <li class="nav-item"><a class="nav-link" href="compte_rendu.html">Compte-rendu</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- header content -->
    <section class="py-5 text-center container">
        <div class="row py-lg-5">
            <div class="col-lg-6 col-md-8 mx-auto">
                <h1>Impacte de la COVID-19 sur les émissions de carbon</h1>
                <p class="lead text-muted"></p>
            </div>
        </div>
    </section>
</main>

<!-- Body -->
<div class="container marketing">

    <div class="d-flex justify-content-around" style="width: fit-content;">
        <h3>Le monde le <h3 class="date mx-2"></h3></h3>
    </div>
    <input id="slider" type="range" value="1" min="0" max="63" step="1" />

    <!-- Premiere Dataviz -->
    <div class="row position-relative m-2">
        <!-- Page content -->
        <div id="map_container" class="position-relative">
        </div>

        <div class='worldmap-legend my-legend' style="width: fit-content">
            <div class='legend-title' style="width: fit-content">Carte cas Covid/CO2</div>
            <div class='legend-scale'>
                <ul class='legend-labels'>
                    <li>
                        <span style='background: linear-gradient(90deg, rgba(255,255,255,1) 0%, rgba(255,0,0,1) 100%);;'></span>
                        Evolution de la COVID dans le pays</li>
                    <li><span style='background: linear-gradient(90deg, rgba(200,200,200,1) 0%, rgba(100,100,100,1) 100%);'></span>
                        Taux de CO2</li>
                </ul>
            </div>
        </div>

        <div class="hidden mytooltip">
            <h3 class="mx-2 mt-2" id="tooltip-country-name"></h3>
            <div class="d-flex justify-content-around">
                <div class="m-2">Chiffres à la date <p class="date"></p></div>
                <div class="m-2" id="tooltip-country-covid">Covid :</div>
                <div class="m-2" id="tooltip-country-co2">CO2 : </div>
            </div>
            <hr/>
            <div id="tooltip-graph">

            </div>
        </div>
    </div>

    <!-- Commentaires de la première dataviz -->
    <p> Sur cette carte du monde, il est possible de faire varier le temps pour observer l'évolution de deux variables.
        Pour chaque pays, y est représenté, l'évolution de la production de CO2 par jour, ainsi que l'évolution du
        nombre de cas de Covid 19.
    </p>

    <p> La coloration des pays dépend de leur production de CO2. Plus un pays est clair, moins il produit de CO2. Cette
        coloration est calculée selon la production de ce même pays. Deux pays peuvent donc avoir la même coloration,
        sans pour autant avoir la même production de CO2.
    </p>
    <div class="m-3 d-flex justify-content-between">
        <img alt="lollipop graph exemple covid/co2" width="500px" src="assets/images/hover_graph_example.png"/>
        <div class="d-flex flex-column justify-content-around m-2">
            <p> Lorsque l'on passe la souris sur un pays, il est possible d'observer un graphique concernant ce pays uniquement.
                Ce graphique représente l'évolution de la production de CO2 et de la COVID-19 dans le pays sélectionné.
                Il permet de visualiser l'évolution de ces variables de manière plus précise.
                Sur ce graphique, la hauteur des barres correspond au nombre de cas de la COVID-19 dans le pays, et le rayon
                des cercle correspond au taux de CO2 émis <b>par rapport aux émissions de ce pays sur la durée de l'observation.</b>
                Chacun de ces graphiques possèdent donc un cercle de rayon 10px, et un cercle de rayon 0px, qui correspondent
                alors aux émissions maximales et minimales pour ce pays.
            </p>
            <p>
                Cette fenêtre nous donne également des informations sur l'état du pays à la date sélectionnée. Si on ne
                souhaite pas se fier à la coloration de la carte, nous pouvons observer le nombre de cas de la COVID dans
                le pays, ainsi que les émissions de CO2.
            </p>
            <p>
                Vous pouvez maintenant observer ces graphiques par vous même. En observant celui de la Chine, vous pourez
                remarquer que lorsque le nombre de cas positifs de la COVID-19 cesse de croitre, la quantité de CO2
                émise par le pays reviennent à la normale, mais les cas de COVID-19 ne décroîent pas.
                Ce comportement nous amène à penser que les données sur la COVID-19 que nous avons en notre possessions
                indiques le nombre de cas cumulés depuis le début de l'épidémie.
            </p>
        </div>
    </div>

    <p> Ces graphiques nous permettent égallement de voir une baisse des émissions de CO2 à intervalles régulières,
        avant la pandémie (ce comportement est plus net pour les pays européens et USA). Après observation, nous pouvons
        remarquer que ces baisses surviennent les dimanches. Pour nous, cela a renforcé l'idée que les déplacements de
        la population étaient directement liés aux émissions de CO2. Pour illustrer ce comportement, nous avons décidé
        d'ajouter un nouveau graphique.
    </p>

    <!-- Seconde Dataviz -->
    <h1>Évolution de la mobilité, des émissions de CO2 et du nombre de cas COVID 19 en fonction du temps</h1>

    <h3>Le monde le <h3 id="date"></h3></h3>
    <input id="bubble_chart_slider" type="range" value="1" min="0" max="289" step="1" />

    <div id="bubble_chart_container" class="position-relative">

        <div id="bubble"></div>
        <div class='bubble-legend my-legend' style="width: fit-content">
            <div class='legend-title' style="width: fit-content">Graphique en bulles</div>
            <div class='legend-scale'>
                <ul id="bubble_legend_content" class='legend-labels'>
                </ul>
            </div>
        </div>
    </div>

    <p>
        Nous pouvons y observer les mêmes variables que dans le graphique précédent, à savoir l'évolution de la
        production de CO2 (axe vertical) ainsi que l'évolution de la pandémie dans chacun des pays (axe horizontale).
        Contrairement au graphique précédent, nous pouvons égallement observer l'importance des mouvements quotidiens
        de la population dans ces pays.
        Il est important de noter que ici, à la différence du dernier graphique, l'évolution du taux de CO2 produit par
        chaque pays n'est pas représenté en fonction se sa production sur l'ensemble de l'observation, mais en fonction
        de la production mondiale (c'est à dire que la hauteur d'une bulle dépend directement de sa production de CO2
        réelle et non d'un ratio.
        Nottons égallement que l'axe horizontale (nombre de cas positifs de la COVID-19) est dynamique.
    </p>
</div>

<!-- Data loading modal -->
<div id="loading_modal" class="modal">
    <!-- Modal content -->
    <div class="modal-content">
        <p>Chargement des données en cours ... </p>
        <p>Cette opération peut prendre près de 30 secondes ... </p>
    </div>
</div>

<!-- Bootstrap -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous"></script>

<!-- Javascript -->
<!-- Code pour ce TP -->
<script src="jquery-3.5.1.min.js"></script>
<script type="text/javascript" src="assets/js/dataviz_worldmap.js"></script>
<script type="text/javascript" src="assets/js/datavizBubble.js"></script>
</body>
</html>